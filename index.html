<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Media Pembelajaran – Gerak Melingkar (Kelas XI)</title>
  <style>
    :root{--bg:#F3EEE7;--card:#FAF7F2;--accent:#D4C2A8;--text:#2F2A25;--primary:#8a7357}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body{background:var(--bg);color:var(--text);padding:18px}
    .container{max-width:1100px;margin:0 auto}
    header{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
    h1{margin:0;font-size:1.4rem}
    .tabs{display:flex;gap:8px;margin-top:14px;flex-wrap:wrap}
    .btn{background:var(--accent);border:0;padding:8px 16px;border-radius:18px;cursor:pointer;font-weight:500;transition:all 0.2s}
    .btn:hover{background:#c5b098}
    .btn-primary{background:var(--primary);color:white}
    .btn-primary:hover{background:#7a6a53}
    .card{background:var(--card);border-radius:14px;padding:18px;box-shadow:0 6px 18px rgba(0,0,0,0.04);margin-bottom:16px}
    .grid{display:grid;gap:16px}
    .cols-2{grid-template-columns:1fr 1fr}
    label{display:block;font-size:0.85rem;margin-bottom:6px;font-weight:500}
    input[type=range]{width:100%;margin:8px 0}
    .small{font-size:0.85rem;color:#605548}
    pre{white-space:pre-wrap;background:rgba(255,255,255,0.6);padding:12px;border-radius:10px;font-family:inherit;line-height:1.4}
    .quiz .q{background:#fff;padding:14px;border-radius:10px;border:1px solid rgba(0,0,0,0.08);margin-bottom:12px}
    footer{margin-top:24px;font-size:0.85rem;color:#6b6155;text-align:center}
    .value-display{font-weight:bold;font-size:1.1rem;color:var(--primary)}
    .sim-controls{display:flex;gap:10px;margin-top:16px}
    .running{background:#6e5a44 !important}
    
    /* responsive */
    @media(max-width:800px){.cols-2{grid-template-columns:1fr}}
    @media(max-width:600px){header{flex-direction:column;align-items:flex-start}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>Media Pembelajaran Interaktif — Gerak Melingkar</h1>
        <div class="small">Kelas XI • Kurikulum Merdeka • Earth tone UI</div>
      </div>
      <div class="tabs">
        <button class="btn btn-primary" onclick="showTab('materi')">Materi</button>
        <button class="btn" onclick="showTab('simulasi')">Simulasi</button>
        <button class="btn" onclick="showTab('lkpd')">LKPD</button>
        <button class="btn" onclick="showTab('kuis')">Kuis</button>
      </div>
    </header>

    <main style="margin-top:20px">
      <!-- MATERI -->
      <section id="materi" class="card">
        <h2>Ringkasan Konsep</h2>
        <ul>
          <li><strong>Gerak Melingkar Beraturan (GMB)</strong>: ω konstan, |v| konstan, arah v berubah.</li>
          <li>Hubungan penting: <code>ω = 2π f</code>, <code>T = 1/f</code>, <code>v = ω r = 2π r f</code>.</li>
          <li>Percepatan normal: <code>aₙ = v² / r = ω² r</code>. Gaya sentripetal: <code>F = m v² / r = m ω² r</code>.</li>
        </ul>
        <div class="grid cols-2" style="margin-top:16px">
          <div class="card">
            <div id="svgWrap"></div>
            <div class="small" style="margin-top:8px">Ilustrasi: v tangen & aₙ ke pusat.</div>
          </div>
          <div class="card">
            <h3>Catatan Penting</h3>
            <p class="small">Jika frekuensi (f) naik, ω & v naik (pada r tetap). aₙ bertambah signifikan dengan v karena aₙ ∝ v².</p>
            <p class="small">Gaya sentripetal bukan gaya baru, melainkan resultan gaya yang mengarah ke pusat lintasan melingkar.</p>
          </div>
        </div>
      </section>

      <!-- SIMULASI -->
      <section id="simulasi" class="card" style="display:none">
        <h2>Simulasi Interaktif Gerak Melingkar</h2>
        <div class="grid cols-2">
          <div>
            <label>Jari-jari r (m): <span id="rVal" class="value-display">0.50</span></label>
            <input id="r" type="range" min="0.1" max="2" step="0.01" value="0.5" oninput="updateSim()">

            <label style="margin-top:16px">Frekuensi f (Hz): <span id="fVal" class="value-display">1.00</span></label>
            <input id="f" type="range" min="0.2" max="5" step="0.01" value="1" oninput="updateSim()">

            <label style="margin-top:16px">Massa m (kg): <span id="mVal" class="value-display">1.00</span></label>
            <input id="m" type="range" min="0.1" max="5" step="0.01" value="1" oninput="updateSim()">

            <div class="sim-controls">
              <button id="runBtn" onclick="runSimulation()" class="btn btn-primary">Jalankan Simulasi</button>
              <button onclick="resetSim()" class="btn">Reset</button>
            </div>
          </div>

          <div>
            <div id="canvas" style="height:240px"></div>
            <div class="grid" style="grid-template-columns:1fr 1fr;margin-top:12px;gap:8px">
              <div class="card small">ω (rad/s)<div class="value-display" id="omega">6.28</div></div>
              <div class="card small">T (s)<div class="value-display" id="T">1.00</div></div>
              <div class="card small">v (m/s)<div class="value-display" id="v">3.14</div></div>
              <div class="card small">aₙ (m/s²)<div class="value-display" id="an">19.74</div></div>
              <div class="card small">F (N)<div class="value-display" id="F">19.74</div></div>
            </div>
          </div>
        </div>
      </section>

      <!-- LKPD -->
      <section id="lkpd" class="card" style="display:none">
        <h2>LKPD — Gerak Melingkar (Kelas XI)</h2>
        <pre id="lkpdText"></pre>
        <div style="margin-top:16px">
          <button onclick="downloadLKPD()" class="btn btn-primary">Unduh LKPD (TXT)</button>
        </div>
      </section>

      <!-- KUIS -->
      <section id="kuis" class="card" style="display:none">
        <h2>Kuis Formatif</h2>
        <div class="quiz" id="quizArea"></div>
        <div style="margin-top:16px">
          <button onclick="gradeQuiz()" class="btn btn-primary">Nilai</button>
          <button onclick="resetQuiz()" class="btn">Reset</button>
          <div id="score" class="small" style="margin-top:12px;font-weight:bold"></div>
        </div>
      </section>
    </main>

    <footer>
      Media Pembelajaran Interaktif - Gerak Melingkar © 2023 - Fisika Kelas XI
    </footer>
  </div>

  <script>
    // ---------- data soal & LKPD ----------
    const bankSoal = [
      {id:1,tipe:'pg',soal:'Sebuah benda bergerak melingkar beraturan dengan r = 0,5 m dan f = 2 Hz. Kecepatan linear v adalah...',opsi:['π m/s','2π m/s','4π m/s','8π m/s'],kunci:1,pemb:'v = 2π r f = 2π×0.5×2 = 2π m/s.'},
      {id:2,tipe:'isian',soal:'Periode T = 0,4 s. Frekuensi f = ____ Hz.',jaw:2.5,tol:0.01,pemb:'f = 1/T = 2.5 Hz.'},
      {id:3,tipe:'pg',soal:'Percepatan normal aₙ untuk v = 10 m/s dan r = 5 m adalah...',opsi:['5 m/s²','10 m/s²','20 m/s²','25 m/s²'],kunci:2,pemb:'aₙ = v²/r = 100/5 = 20 m/s².'},
      {id:4,tipe:'pg',soal:'Gaya sentripetal F untuk m = 2 kg, v = 6 m/s, r = 3 m adalah...',opsi:['8 N','12 N','24 N','36 N'],kunci:2,pemb:'F = m v²/r = 2×36/3 = 24 N.'},
      {id:5,tipe:'isian',soal:'Sebuah roda memiliki ω = 12 rad/s dan r = 0,25 m. Kecepatan linear v = ____ m/s.',jaw:3,tol:0.02,pemb:'v = ω r = 3 m/s.'}
    ];

    const LKPD_TEXT = `LKPD – Gerak Melingkar (Kelas XI)
Kurikulum Merdeka

A. Tujuan Pembelajaran
Menganalisis hubungan antara kecepatan sudut (ω), periode (T), frekuensi (f), kecepatan linear (v), percepatan normal aₙ, dan gaya sentripetal (F).

B. Alat & Bahan
• Tali nilon ±1 m, beban kecil
• Stopwatch
• Penggaris / meteran

C. Langkah Kegiatan
1) Ukur r, putar benda, rekam 10 s.
2) Hitung N putaran pada t, f=N/t, T=1/f.
3) Hitung v=2π r f, aₙ=v²/r, F=m v² / r.

E. Tabel Data
| Uji | r (m) | N | t (s) | f (Hz) | v (m/s) | aₙ (m/s²) | m (kg) | F (N) |
|-----|-------|---|-------|--------|---------|-----------|--------|-------|
| 1   |       |   |       |        |         |           |        |       |
| 2   |       |   |       |        |         |           |        |       |
| 3   |       |   |       |        |         |           |        |       |

F. Refleksi
Tuliskan 2 hal yang Anda pahami dan 1 yang masih membingungkan.`;

    // ---------- variabel global untuk simulasi ----------
    let simulationInterval = null;
    let isSimulationRunning = false;

    // ---------- tabs ----------
    function showTab(id){
      ['materi','simulasi','lkpd','kuis'].forEach(t => {
        document.getElementById(t).style.display = (t === id) ? 'block' : 'none';
      });
      
      if(id === 'simulasi') {
        renderSVG();
      } else if (isSimulationRunning) {
        stopSimulation();
      }
    }

    // ---------- SVG ilustrasi sederhana ----------
    function renderSVG(rPixels = 120, v = 6){
      const size = 320; 
      const cx = size/2, cy = size/2;
      const theta = Math.PI/6; 
      const r = rPixels;
      const px = cx + r*Math.cos(theta); 
      const py = cy + r*Math.sin(theta);
      const tx = px + 0.6*v*Math.cos(theta + Math.PI/2); 
      const ty = py + 0.6*v*Math.sin(theta + Math.PI/2);
      const ax = px + 0.6*v*Math.cos(theta + Math.PI); 
      const ay = py + 0.6*v*Math.sin(theta + Math.PI);
      
      const svg = `
        <svg viewBox="0 0 ${size} ${size}" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
              <path d="M 0 0 L 10 5 L 0 10 z" fill="#7a6a53"/>
            </marker>
          </defs>
          <circle cx="${cx}" cy="${cy}" r="${r}" fill="none" stroke="#bfa888" stroke-width="3"/>
          <circle cx="${cx}" cy="${cy}" r="4" fill="#7a6a53"/>
          <circle cx="${px}" cy="${py}" r="8" fill="#6e5a44"/>
          <line x1="${px}" y1="${py}" x2="${tx}" y2="${ty}" stroke="#6e5a44" stroke-width="3" marker-end="url(#arrow)"/>
          <line x1="${px}" y1="${py}" x2="${ax}" y2="${ay}" stroke="#8a7357" stroke-width="3" marker-end="url(#arrow)"/>
          <text x="${tx+8}" y="${ty}" font-size="12" fill="#6e5a44">v (tangen)</text>
          <text x="${ax-32}" y="${ay-6}" font-size="12" fill="#8a7357">aₙ ke pusat</text>
        </svg>
      `;
      document.getElementById('svgWrap').innerHTML = svg;
    }

    // ---------- simulasi ----------
    function fmt(x, d = 2) {
      if (!isFinite(x)) return '-';
      return Number(x).toFixed(d);
    }
    
    function updateSim() {
      const r = parseFloat(document.getElementById('r').value);
      const f = parseFloat(document.getElementById('f').value);
      const m = parseFloat(document.getElementById('m').value);
      
      document.getElementById('rVal').textContent = fmt(r, 2);
      document.getElementById('fVal').textContent = fmt(f, 2);
      document.getElementById('mVal').textContent = fmt(m, 2);

      const omega = 2 * Math.PI * f;
      const T = f > 0 ? 1/f : Infinity;
      const v = omega * r;
      const an = r > 0 ? v*v/r : 0;
      const F = m * an;

      document.getElementById('omega').textContent = fmt(omega, 2);
      document.getElementById('T').textContent = fmt(T, 2);
      document.getElementById('v').textContent = fmt(v, 2);
      document.getElementById('an').textContent = fmt(an, 2);
      document.getElementById('F').textContent = fmt(F, 2);

      // render small svg scaled by r
      const rp = Math.min(140, 80 + r*40);
      renderSVG(rp, v);
    }
    
    function resetSim() {
      document.getElementById('r').value = 0.5;
      document.getElementById('f').value = 1;
      document.getElementById('m').value = 1;
      updateSim();
    }
    
    function runSimulation() {
      if (isSimulationRunning) {
        stopSimulation();
        return;
      }
      
      const runBtn = document.getElementById('runBtn');
      runBtn.textContent = 'Stop Simulasi';
      runBtn.classList.add('running');
      isSimulationRunning = true;
      
      let counter = 0;
      const originalR = parseFloat(document.getElementById('r').value);
      const originalF = parseFloat(document.getElementById('f').value);
      
      simulationInterval = setInterval(() => {
        counter++;
        
        // Ubah nilai f dan r secara periodik untuk menunjukkan efek
        const newF = originalF * (1 + 0.3 * Math.sin(counter * 0.1));
        const newR = originalR * (1 + 0.2 * Math.sin(counter * 0.05));
        
        document.getElementById('f').value = newF;
        document.getElementById('r').value = newR;
        updateSim();
        
        if (counter >= 100) {
          stopSimulation();
        }
      }, 100);
    }
    
    function stopSimulation() {
      if (simulationInterval) {
        clearInterval(simulationInterval);
        simulationInterval = null;
      }
      
      const runBtn = document.getElementById('runBtn');
      runBtn.textContent = 'Jalankan Simulasi';
      runBtn.classList.remove('running');
      isSimulationRunning = false;
    }

    // ---------- LKPD ----------
    function fillLKPD() {
      document.getElementById('lkpdText').textContent = LKPD_TEXT;
    }
    
    function downloadLKPD() {
      const blob = new Blob([LKPD_TEXT], {type: 'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'LKPD_Gerak_Melingkar_KelasXI.txt';
      a.click();
      URL.revokeObjectURL(url);
    }

    // ---------- quiz ----------
    function renderQuiz() {
      const area = document.getElementById('quizArea');
      area.innerHTML = '';
      
      bankSoal.forEach((q, idx) => {
        const div = document.createElement('div');
        div.className = 'q';
        
        const title = document.createElement('div');
        title.innerHTML = `<strong>${idx+1}.</strong> ${q.soal}`;
        div.appendChild(title);
        
        if (q.tipe === 'pg') {
          q.opsi.forEach((o, i) => {
            const id = `q_${q.id}_${i}`;
            const label = document.createElement('label');
            label.style.display = 'block';
            label.style.marginTop = '6px';
            
            const input = document.createElement('input');
            input.type = 'radio';
            input.name = `q_${q.id}`;
            input.value = i;
            input.id = id;
            
            label.appendChild(input);
            label.appendChild(document.createTextNode(' ' + o));
            div.appendChild(label);
          });
        } else {
          const input = document.createElement('input');
          input.type = 'number';
          input.step = "any";
          input.id = `q_${q.id}`;
          input.style.padding = '6px';
          input.style.marginTop = '6px';
          input.style.width = '100px';
          div.appendChild(input);
        }
        
        area.appendChild(div);
      });
    }
    
    function gradeQuiz() {
      let benar = 0;
      
      bankSoal.forEach(q => {
        if (q.tipe === 'pg') {
          const selected = document.querySelector(`input[name=q_${q.id}]:checked`);
          if (selected && parseInt(selected.value, 10) === q.kunci) {
            benar++;
          }
        } else {
          const value = parseFloat(document.getElementById(`q_${q.id}`).value);
          if (!isNaN(value) && Math.abs(value - q.jaw) <= (q.tol || 0.01)) {
            benar++;
          }
        }
      });
      
      const persen = Math.round(100 * benar / bankSoal.length);
      document.getElementById('score').textContent = `Skor: ${benar}/${bankSoal.length} (${persen}%)`;
      
      // Tampilkan pembahasan
      const area = document.getElementById('quizArea');
      Array.from(area.children).forEach((el, i) => {
        // Hapus pembahasan sebelumnya jika ada
        const oldP = el.querySelector('.pembahasan');
        if (oldP) oldP.remove();
        
        const p = document.createElement('div');
        p.className = 'pembahasan small';
        p.style.marginTop = '8px';
        p.style.color = '#6b6155';
        p.textContent = 'Pembahasan: ' + bankSoal[i].pemb;
        el.appendChild(p);
      });
    }
    
    function resetQuiz() {
      renderQuiz();
      document.getElementById('score').textContent = '';
    }

    // ---------- init ----------
    document.addEventListener('DOMContentLoaded', () => {
      renderSVG();
      updateSim();
      fillLKPD();
      renderQuiz();
    });
  </script>
</body>
</html>
